# Unistore Benchmark - Example environment file
# Copy to `.env` and fill in values:
#   cp env.example .env
#
# NOTE: Postgres is optional and is NOT connected to at startup by default.

# -----------------------------------------------------------------------------
# App
# -----------------------------------------------------------------------------
APP_HOST=127.0.0.1
APP_PORT=8000
APP_DEBUG=true
APP_RELOAD=true

# -----------------------------------------------------------------------------
# WebSockets
# -----------------------------------------------------------------------------
WS_PING_INTERVAL=30
WS_PING_TIMEOUT=10

# -----------------------------------------------------------------------------
# Live Metrics (in-memory cache + worker push)
# -----------------------------------------------------------------------------
# LIVE_METRICS_POST_URL defaults to http://APP_HOST:APP_PORT when empty.
LIVE_METRICS_CACHE_TTL_SECONDS=5
LIVE_METRICS_POST_URL=
LIVE_METRICS_POST_TIMEOUT_SECONDS=0.5

# -----------------------------------------------------------------------------
# Snowflake (required)
# -----------------------------------------------------------------------------
SNOWFLAKE_ACCOUNT=your_account.region
SNOWFLAKE_USER=your_username
SNOWFLAKE_PASSWORD=your_password
SNOWFLAKE_WAREHOUSE=COMPUTE_WH
SNOWFLAKE_DATABASE=UNISTORE_BENCHMARK
SNOWFLAKE_SCHEMA=PUBLIC
SNOWFLAKE_ROLE=ACCOUNTADMIN

# Snowflake connection pool (RESULTS / persistence)
SNOWFLAKE_POOL_SIZE=5
SNOWFLAKE_MAX_OVERFLOW=10
SNOWFLAKE_POOL_TIMEOUT=30
SNOWFLAKE_POOL_RECYCLE=3600
SNOWFLAKE_POOL_MAX_PARALLEL_CREATES=8

# Thread pools
# - Results executor: persistence + UI reads from results tables
# - Benchmark executor: workload execution (must be >= requested concurrency per node to avoid app-side queueing)
SNOWFLAKE_RESULTS_EXECUTOR_MAX_WORKERS=16
SNOWFLAKE_BENCHMARK_EXECUTOR_MAX_WORKERS=256

# Snowflake connector timeouts (seconds) - helps uvicorn --reload shutdown cleanly
SNOWFLAKE_CONNECT_LOGIN_TIMEOUT=15
SNOWFLAKE_CONNECT_NETWORK_TIMEOUT=15
SNOWFLAKE_CONNECT_SOCKET_TIMEOUT=15

# Benchmark/workload connector timeouts (seconds)
# Use higher values so we observe DB queueing/slowdowns instead of client-side read timeouts.
SNOWFLAKE_BENCHMARK_CONNECT_LOGIN_TIMEOUT=15
SNOWFLAKE_BENCHMARK_CONNECT_NETWORK_TIMEOUT=60
SNOWFLAKE_BENCHMARK_CONNECT_SOCKET_TIMEOUT=60

# -----------------------------------------------------------------------------
# Postgres (optional)
# -----------------------------------------------------------------------------
# Only connect to Postgres during app startup if you explicitly opt in:
POSTGRES_CONNECT_ON_STARTUP=false

POSTGRES_HOST=localhost
POSTGRES_PORT=5432
# Fallback database if template doesn't specify one.
# Templates now dynamically use the database selected in the UI dropdown.
POSTGRES_DATABASE=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=

# Postgres pool sizing (applies to all dynamically created pools)
POSTGRES_POOL_MIN_SIZE=5
POSTGRES_POOL_MAX_SIZE=20




